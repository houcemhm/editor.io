{"ast":null,"code":"/**\r\n * Date: 2015-10-05\r\n * Author: Kasper SÃ¸fren <soefritz@gmail.com> (https://github.com/kafoso)\r\n *\r\n * A truncation feature, where the ellipsis will be placed at a section within\r\n * the URL making it still somewhat human readable.\r\n *\r\n * @param {String} url\t\t\t\t\t\t A URL.\r\n * @param {Number} truncateLen\t\t The maximum length of the truncated output URL string.\r\n * @param {String} ellipsisChars\t The characters to place within the url, e.g. \"...\".\r\n * @return {String} The truncated URL.\r\n */\nexport function truncateSmart(url, truncateLen, ellipsisChars) {\n  var ellipsisLengthBeforeParsing;\n  var ellipsisLength;\n  if (ellipsisChars == null) {\n    ellipsisChars = '&hellip;';\n    ellipsisLength = 3;\n    ellipsisLengthBeforeParsing = 8;\n  } else {\n    ellipsisLength = ellipsisChars.length;\n    ellipsisLengthBeforeParsing = ellipsisChars.length;\n  }\n  var parse_url = function (url) {\n    var urlObj = {};\n    var urlSub = url;\n    var match = urlSub.match(/^([a-z]+):\\/\\//i);\n    if (match) {\n      urlObj.scheme = match[1];\n      urlSub = urlSub.substr(match[0].length);\n    }\n    match = urlSub.match(/^(.*?)(?=(\\?|#|\\/|$))/i);\n    if (match) {\n      urlObj.host = match[1];\n      urlSub = urlSub.substr(match[0].length);\n    }\n    match = urlSub.match(/^\\/(.*?)(?=(\\?|#|$))/i);\n    if (match) {\n      urlObj.path = match[1];\n      urlSub = urlSub.substr(match[0].length);\n    }\n    match = urlSub.match(/^\\?(.*?)(?=(#|$))/i);\n    if (match) {\n      urlObj.query = match[1];\n      urlSub = urlSub.substr(match[0].length);\n    }\n    match = urlSub.match(/^#(.*?)$/i);\n    if (match) {\n      urlObj.fragment = match[1];\n      //urlSub = urlSub.substr(match[0].length);  -- not used. Uncomment if adding another block.\n    }\n\n    return urlObj;\n  };\n  var buildUrl = function (urlObj) {\n    var url = \"\";\n    if (urlObj.scheme && urlObj.host) {\n      url += urlObj.scheme + \"://\";\n    }\n    if (urlObj.host) {\n      url += urlObj.host;\n    }\n    if (urlObj.path) {\n      url += \"/\" + urlObj.path;\n    }\n    if (urlObj.query) {\n      url += \"?\" + urlObj.query;\n    }\n    if (urlObj.fragment) {\n      url += \"#\" + urlObj.fragment;\n    }\n    return url;\n  };\n  var buildSegment = function (segment, remainingAvailableLength) {\n    var remainingAvailableLengthHalf = remainingAvailableLength / 2,\n      startOffset = Math.ceil(remainingAvailableLengthHalf),\n      endOffset = -1 * Math.floor(remainingAvailableLengthHalf),\n      end = \"\";\n    if (endOffset < 0) {\n      end = segment.substr(endOffset);\n    }\n    return segment.substr(0, startOffset) + ellipsisChars + end;\n  };\n  if (url.length <= truncateLen) {\n    return url;\n  }\n  var availableLength = truncateLen - ellipsisLength;\n  var urlObj = parse_url(url);\n  // Clean up the URL\n  if (urlObj.query) {\n    var matchQuery = urlObj.query.match(/^(.*?)(?=(\\?|\\#))(.*?)$/i);\n    if (matchQuery) {\n      // Malformed URL; two or more \"?\". Removed any content behind the 2nd.\n      urlObj.query = urlObj.query.substr(0, matchQuery[1].length);\n      url = buildUrl(urlObj);\n    }\n  }\n  if (url.length <= truncateLen) {\n    return url;\n  }\n  if (urlObj.host) {\n    urlObj.host = urlObj.host.replace(/^www\\./, \"\");\n    url = buildUrl(urlObj);\n  }\n  if (url.length <= truncateLen) {\n    return url;\n  }\n  // Process and build the URL\n  var str = \"\";\n  if (urlObj.host) {\n    str += urlObj.host;\n  }\n  if (str.length >= availableLength) {\n    if (urlObj.host.length == truncateLen) {\n      return (urlObj.host.substr(0, truncateLen - ellipsisLength) + ellipsisChars).substr(0, availableLength + ellipsisLengthBeforeParsing);\n    }\n    return buildSegment(str, availableLength).substr(0, availableLength + ellipsisLengthBeforeParsing);\n  }\n  var pathAndQuery = \"\";\n  if (urlObj.path) {\n    pathAndQuery += \"/\" + urlObj.path;\n  }\n  if (urlObj.query) {\n    pathAndQuery += \"?\" + urlObj.query;\n  }\n  if (pathAndQuery) {\n    if ((str + pathAndQuery).length >= availableLength) {\n      if ((str + pathAndQuery).length == truncateLen) {\n        return (str + pathAndQuery).substr(0, truncateLen);\n      }\n      var remainingAvailableLength = availableLength - str.length;\n      return (str + buildSegment(pathAndQuery, remainingAvailableLength)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n    } else {\n      str += pathAndQuery;\n    }\n  }\n  if (urlObj.fragment) {\n    var fragment = \"#\" + urlObj.fragment;\n    if ((str + fragment).length >= availableLength) {\n      if ((str + fragment).length == truncateLen) {\n        return (str + fragment).substr(0, truncateLen);\n      }\n      var remainingAvailableLength2 = availableLength - str.length;\n      return (str + buildSegment(fragment, remainingAvailableLength2)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n    } else {\n      str += fragment;\n    }\n  }\n  if (urlObj.scheme && urlObj.host) {\n    var scheme = urlObj.scheme + \"://\";\n    if ((str + scheme).length < availableLength) {\n      return (scheme + str).substr(0, truncateLen);\n    }\n  }\n  if (str.length <= truncateLen) {\n    return str;\n  }\n  var end = \"\";\n  if (availableLength > 0) {\n    end = str.substr(-1 * Math.floor(availableLength / 2));\n  }\n  return (str.substr(0, Math.ceil(availableLength / 2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n}","map":{"version":3,"mappings":"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","names":["truncateSmart","url","truncateLen","ellipsisChars","ellipsisLengthBeforeParsing","ellipsisLength","length","parse_url","urlObj","urlSub","match","scheme","substr","host","path","query","fragment","buildUrl","buildSegment","segment","remainingAvailableLength","remainingAvailableLengthHalf","startOffset","Math","ceil","endOffset","floor","end","availableLength","matchQuery","replace","str","pathAndQuery","remainingAvailableLength2"],"sources":["D:\\github\\editor.io\\node_modules\\autolinker\\dist\\es2015\\src\\truncate\\truncate-smart.ts"],"sourcesContent":["/**\n * Date: 2015-10-05\n * Author: Kasper SÃ¸fren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed at a section within\n * the URL making it still somewhat human readable.\n *\n * @param {String} url\t\t\t\t\t\t A URL.\n * @param {Number} truncateLen\t\t The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars\t The characters to place within the url, e.g. \"...\".\n * @return {String} The truncated URL.\n */\nexport function truncateSmart( url: string, truncateLen: number, ellipsisChars?: string ) {\n\n\tlet ellipsisLengthBeforeParsing: number;\n\tlet ellipsisLength: number;\n\n\tif(ellipsisChars == null) {\n\t\tellipsisChars = '&hellip;';\n\t\tellipsisLength = 3;\n\t\tellipsisLengthBeforeParsing = 8;\n\t} else {\n\t\tellipsisLength = ellipsisChars.length;\n\t\tellipsisLengthBeforeParsing = ellipsisChars.length;\n\t}\n\n\tlet parse_url = function(url: string) { // Functionality inspired by PHP function of same name\n\t\tlet urlObj: UrlObject = {};\n\t\tlet urlSub = url;\n\t\tlet match = urlSub.match(/^([a-z]+):\\/\\//i);\n\t\tif (match) {\n\t\t\turlObj.scheme = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^(.*?)(?=(\\?|#|\\/|$))/i);\n\t\tif (match) {\n\t\t\turlObj.host = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^\\/(.*?)(?=(\\?|#|$))/i);\n\t\tif (match) {\n\t\t\turlObj.path = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^\\?(.*?)(?=(#|$))/i);\n\t\tif (match) {\n\t\t\turlObj.query = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^#(.*?)$/i);\n\t\tif (match) {\n\t\t\turlObj.fragment = match[1];\n\t\t\t//urlSub = urlSub.substr(match[0].length);  -- not used. Uncomment if adding another block.\n\t\t}\n\t\treturn urlObj;\n\t};\n\n\tlet buildUrl = function(urlObj: UrlObject){\n\t\tlet url = \"\";\n\t\tif (urlObj.scheme && urlObj.host) {\n\t\t\turl += urlObj.scheme + \"://\";\n\t\t}\n\t\tif (urlObj.host) {\n\t\t\turl += urlObj.host;\n\t\t}\n\t\tif (urlObj.path) {\n\t\t\turl += \"/\" + urlObj.path;\n\t\t}\n\t\tif (urlObj.query) {\n\t\t\turl += \"?\" + urlObj.query;\n\t\t}\n\t\tif (urlObj.fragment) {\n\t\t\turl += \"#\" + urlObj.fragment;\n\t\t}\n\t\treturn url;\n\t};\n\n\tlet buildSegment = function(segment: string, remainingAvailableLength: number){\n\t\tlet remainingAvailableLengthHalf = remainingAvailableLength/ 2,\n\t\t\t\tstartOffset = Math.ceil(remainingAvailableLengthHalf),\n\t\t\t\tendOffset = (-1)*Math.floor(remainingAvailableLengthHalf),\n\t\t\t\tend = \"\";\n\t\tif (endOffset < 0) {\n\t\t\tend = segment.substr(endOffset);\n\t\t}\n\t\treturn segment.substr(0, startOffset) + ellipsisChars + end;\n\t};\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\tlet availableLength = truncateLen - ellipsisLength;\n\tlet urlObj = parse_url(url);\n\t// Clean up the URL\n\tif (urlObj.query) {\n\t\tlet matchQuery = urlObj.query.match(/^(.*?)(?=(\\?|\\#))(.*?)$/i);\n\t\tif (matchQuery) {\n\t\t\t// Malformed URL; two or more \"?\". Removed any content behind the 2nd.\n\t\t\turlObj.query = urlObj.query.substr(0, matchQuery[1].length);\n\t\t\turl = buildUrl(urlObj);\n\t\t}\n\t}\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\tif (urlObj.host) {\n\t\turlObj.host = urlObj.host.replace(/^www\\./, \"\");\n\t\turl = buildUrl(urlObj);\n\t}\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\t// Process and build the URL\n\tlet str = \"\";\n\tif (urlObj.host) {\n\t\tstr += urlObj.host;\n\t}\n\tif (str.length >= availableLength) {\n\t\tif ((urlObj.host as string).length == truncateLen) {\n\t\t\treturn ((urlObj.host as string).substr(0, (truncateLen - ellipsisLength)) + ellipsisChars).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t}\n\t\treturn buildSegment(str, availableLength).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t}\n\tlet pathAndQuery = \"\";\n\tif (urlObj.path) {\n\t\tpathAndQuery += \"/\" + urlObj.path;\n\t}\n\tif (urlObj.query) {\n\t\tpathAndQuery += \"?\" + urlObj.query;\n\t}\n\tif (pathAndQuery) {\n\t\tif ((str+pathAndQuery).length >= availableLength) {\n\t\t\tif ((str+pathAndQuery).length == truncateLen) {\n\t\t\t\treturn (str + pathAndQuery).substr(0, truncateLen);\n\t\t\t}\n\t\t\tlet remainingAvailableLength = availableLength - str.length;\n\t\t\treturn (str + buildSegment(pathAndQuery, remainingAvailableLength)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t} else {\n\t\t\tstr += pathAndQuery;\n\t\t}\n\t}\n\tif (urlObj.fragment) {\n\t\tlet fragment = \"#\"+urlObj.fragment;\n\t\tif ((str+fragment).length >= availableLength) {\n\t\t\tif ((str+fragment).length == truncateLen) {\n\t\t\t\treturn (str + fragment).substr(0, truncateLen);\n\t\t\t}\n\t\t\tlet remainingAvailableLength2 = availableLength - str.length;\n\t\t\treturn (str + buildSegment(fragment, remainingAvailableLength2)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t} else {\n\t\t\tstr += fragment;\n\t\t}\n\t}\n\tif (urlObj.scheme && urlObj.host) {\n\t\tlet scheme = urlObj.scheme + \"://\";\n\t\tif ((str+scheme).length < availableLength) {\n\t\t\treturn (scheme + str).substr(0, truncateLen);\n\t\t}\n\t}\n\tif (str.length <= truncateLen) {\n\t\treturn str;\n\t}\n\tlet end = \"\";\n\tif (availableLength > 0) {\n\t\tend = str.substr((-1)*Math.floor(availableLength/2));\n\t}\n\treturn (str.substr(0, Math.ceil(availableLength/2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n}\n\n\ninterface UrlObject {\n\tscheme?: string;\n\thost?: string;\n\tpath?: string;\n\tquery?: string;\n\tfragment?: string\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}